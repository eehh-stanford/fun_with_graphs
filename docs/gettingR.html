<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; Getting Started in R – Fun with Graphs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./interpreting.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-626149efe8f5d16e1d391ba177679bf0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./gettingR.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started in R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fun with Graphs</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fun with Graphs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gettingR.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started in R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interpreting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Interpreting Scientific Figures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./drawing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Theoretical Scientific Figures in <code>R</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Actual Graphs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./odes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ODEs in <code>R</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setting-up-r-and-rstudio" id="toc-setting-up-r-and-rstudio" class="nav-link active" data-scroll-target="#setting-up-r-and-rstudio"><span class="header-section-number">1.1</span> Setting up <code>R</code> and RStudio</a></li>
  <li><a href="#what-is-r" id="toc-what-is-r" class="nav-link" data-scroll-target="#what-is-r"><span class="header-section-number">1.2</span> What Is <code>R</code>?</a></li>
  <li><a href="#why-use-r" id="toc-why-use-r" class="nav-link" data-scroll-target="#why-use-r"><span class="header-section-number">1.3</span> Why Use <code>R</code>?</a></li>
  <li><a href="#wouldnt-something-menu-driven-be-easier" id="toc-wouldnt-something-menu-driven-be-easier" class="nav-link" data-scroll-target="#wouldnt-something-menu-driven-be-easier"><span class="header-section-number">1.4</span> Wouldn’t Something Menu-Driven Be Easier?</a></li>
  <li><a href="#rhesus-money-grooming-network" id="toc-rhesus-money-grooming-network" class="nav-link" data-scroll-target="#rhesus-money-grooming-network"><span class="header-section-number">1.5</span> Rhesus Money Grooming Network</a></li>
  <li><a href="#a-few-conventions-and-other-helpful-bits" id="toc-a-few-conventions-and-other-helpful-bits" class="nav-link" data-scroll-target="#a-few-conventions-and-other-helpful-bits"><span class="header-section-number">1.6</span> A Few Conventions and Other Helpful Bits</a></li>
  <li><a href="#r-as-a-calculator" id="toc-r-as-a-calculator" class="nav-link" data-scroll-target="#r-as-a-calculator"><span class="header-section-number">1.7</span> <code>R</code> as a Calculator</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"><span class="header-section-number">1.8</span> Data Types</a></li>
  <li><a href="#coercion" id="toc-coercion" class="nav-link" data-scroll-target="#coercion"><span class="header-section-number">1.9</span> Coercion</a></li>
  <li><a href="#creating-vectors" id="toc-creating-vectors" class="nav-link" data-scroll-target="#creating-vectors"><span class="header-section-number">1.10</span> Creating Vectors</a></li>
  <li><a href="#creating-matrices" id="toc-creating-matrices" class="nav-link" data-scroll-target="#creating-matrices"><span class="header-section-number">1.11</span> Creating Matrices</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames"><span class="header-section-number">1.12</span> Data Frames</a></li>
  <li><a href="#directories-and-paths" id="toc-directories-and-paths" class="nav-link" data-scroll-target="#directories-and-paths"><span class="header-section-number">1.13</span> Directories and Paths</a></li>
  <li><a href="#reading-files" id="toc-reading-files" class="nav-link" data-scroll-target="#reading-files"><span class="header-section-number">1.14</span> Reading Files</a></li>
  <li><a href="#the-workspace" id="toc-the-workspace" class="nav-link" data-scroll-target="#the-workspace"><span class="header-section-number">1.15</span> The Workspace</a></li>
  <li><a href="#scope" id="toc-scope" class="nav-link" data-scroll-target="#scope"><span class="header-section-number">1.16</span> Scope</a></li>
  <li><a href="#indexing-and-subsetting" id="toc-indexing-and-subsetting" class="nav-link" data-scroll-target="#indexing-and-subsetting"><span class="header-section-number">1.17</span> Indexing and Subsetting</a></li>
  <li><a href="#more-subsetting" id="toc-more-subsetting" class="nav-link" data-scroll-target="#more-subsetting"><span class="header-section-number">1.18</span> More Subsetting</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values"><span class="header-section-number">1.19</span> Missing Values</a></li>
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data"><span class="header-section-number">1.20</span> Summarizing Data</a></li>
  <li><a href="#naming-data" id="toc-naming-data" class="nav-link" data-scroll-target="#naming-data"><span class="header-section-number">1.21</span> Naming Data</a></li>
  <li><a href="#working-on-lists" id="toc-working-on-lists" class="nav-link" data-scroll-target="#working-on-lists"><span class="header-section-number">1.22</span> Working on Lists</a></li>
  <li><a href="#flow-control-if" id="toc-flow-control-if" class="nav-link" data-scroll-target="#flow-control-if"><span class="header-section-number">1.23</span> Flow Control: <code>if</code></a></li>
  <li><a href="#flow-control-for" id="toc-flow-control-for" class="nav-link" data-scroll-target="#flow-control-for"><span class="header-section-number">1.24</span> Flow Control: <code>for</code></a></li>
  <li><a href="#using-packages" id="toc-using-packages" class="nav-link" data-scroll-target="#using-packages"><span class="header-section-number">1.25</span> Using Packages</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-r" class="quarto-section-identifier"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started in R</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>These notes will help get you started with <code>R</code>. They are mostly quite non-graphical, focusing instead on the basics of the <code>R</code> language.</p>
<section id="setting-up-r-and-rstudio" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="setting-up-r-and-rstudio"><span class="header-section-number">1.1</span> Setting up <code>R</code> and RStudio</h2>
<p>To get started, you need to do two things:</p>
<ol type="1">
<li><a href="https://ftp.osuosl.org/pub/cran/">Download R CRAN</a></li>
<li><a href="https://posit.co/download/rstudio-desktop/">Download and Install RStudio</a></li>
</ol>
<p><code>R</code> is the software. RStudio is what is known as an Integrated Development Environment (IDE). Basically, an IDE is a way of running base software the provides various tools to make the coding experience easier (e.g., an editor with syntax highlighting, debugger, and interactive graphics facilities).</p>
<p>Here is a brief video explaining what to do:</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/m5BZkW54LI8" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>What follows are some old notes that are very Base-<code>R</code> focused. The thing is, even though most people use the <a href="https://www.tidyverse.org/">tidyverse</a> tools these days, it’s still valuable to understand Base-<code>R</code> (since that’s what everything else is built upon!). This is particularly true for the material that forms the bulk of these notes. Making theoretical scientific figures (chapter <a href="drawing.html" class="quarto-xref"><span>Chapter 3</span></a>) is simply easier in Base-<code>R</code>. You typically don’t need to do complex data wrangling to make a theoretical figure, so the powerful data-manipulation tools of <code>dplyr</code>, for instance, are unnecessary. Sometimes, we want to utilize the <a href="https://www.stat.auckland.ac.nz/~paul/RG2e/"><code>grid</code> package</a>, which underlies the tidyverse graphics library <code>ggplot2</code>, directly. Again, I find this more straightforward in Base-<code>R</code>.</p>
<p>The <code>igraph</code> package for drawing graphs (a.k.a., “networks”) that we discuss in chapter <a href="graphs.html" class="quarto-xref"><span>Chapter 4</span></a> also runs in Base-<code>R</code>.</p>
</section>
<section id="what-is-r" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="what-is-r"><span class="header-section-number">1.2</span> What Is <code>R</code>?</h2>
<ul>
<li><p><code>R</code> is statistical numerical software</p></li>
<li><p><code>R</code> is a “dialect” of the S statistical programming language</p></li>
<li><p><code>R</code> is a system for interactive data analysis</p></li>
<li><p><code>R</code> is a high-level programming language</p></li>
<li><p><code>R</code> is free</p></li>
<li><p><code>R</code> is state-of-the-art in statistical computing. It is what many (most?) research statisticians use in their work</p></li>
</ul>
</section>
<section id="why-use-r" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="why-use-r"><span class="header-section-number">1.3</span> Why Use <code>R</code>?</h2>
<ul>
<li><p><code>R</code> is FREE! That, by itself, is almost enough. No complicated licensing. Broad dissemination of research methodologies and results, etc.</p></li>
<li><p><code>R</code> is available for a variety of computer platforms (e.g., Linux, MacOS, Windows).</p></li>
<li><p><code>R</code> is widely used by professional statisticians, social scientists, biologists, demographers, and other scientists. This increases the likelihood that code will exist to do a calculation you might want to do.</p></li>
<li><p><code>R</code> has remarkable online help lists, tutorials, etc.</p></li>
<li><p><code>R</code> represents the state-of-the-art in statistical computing.</p></li>
</ul>
</section>
<section id="wouldnt-something-menu-driven-be-easier" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="wouldnt-something-menu-driven-be-easier"><span class="header-section-number">1.4</span> Wouldn’t Something Menu-Driven Be Easier?</h2>
<ul>
<li><p>Fallacious thinking</p>
<ul>
<li><p>For teaching, text-based input is always better</p></li>
<li><p>Example code can be copied and input <em>exactly</em>; you can then tweak it and see what happens, facilitating the learning process</p></li>
</ul></li>
<li><p>An example</p></li>
<li><p>What follows is a pretty complicated graph of the grooming interactions of a group of rhesus monkeys, <em>Macaca mulatta</em>, observed by Sade (1972)</p></li>
<li><p>With the code I used to generate this graph, you can recreate the figure <em>exactly</em>. Try it! It doesn’t matter if you have no idea what you’re doing yet. That’s the point.</p></li>
<li><p>The only thing you need to make this figure is to install and load the library <code>igraph</code></p></li>
</ul>
</section>
<section id="rhesus-money-grooming-network" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="rhesus-money-grooming-network"><span class="header-section-number">1.5</span> Rhesus Money Grooming Network</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(igraph)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>rhesus <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"./data/sade1.txt"</span>, <span class="at">skip=</span><span class="dv">1</span>, <span class="at">header=</span><span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>rhesus <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(rhesus)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>nms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"066"</span>, <span class="st">"R006"</span>, <span class="st">"CN"</span>, <span class="st">"ER"</span>, <span class="st">"CY"</span>, <span class="st">"EC"</span>, <span class="st">"EZ"</span>, <span class="st">"004"</span>, <span class="st">"065"</span>, <span class="st">"022"</span>, <span class="st">"076"</span>, </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">"AC"</span>, <span class="st">"EK"</span>, <span class="st">"DL"</span>, <span class="st">"KD"</span>, <span class="st">"KE"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>sex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"M"</span>,<span class="dv">7</span>), <span class="fu">rep</span>(<span class="st">"F"</span>,<span class="dv">9</span>))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(rhesus)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> nms</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(rhesus)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> nms</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>grhesus <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(rhesus, <span class="at">weighted=</span><span class="cn">TRUE</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(grhesus)<span class="sc">$</span>sex <span class="ot">&lt;-</span> sex</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>rhesus.layout <span class="ot">&lt;-</span> <span class="fu">layout.kamada.kawai</span>(grhesus)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grhesus, </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.width=</span><span class="fu">log10</span>(<span class="fu">E</span>(grhesus)<span class="sc">$</span>weight)<span class="sc">+</span><span class="dv">1</span>, </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.arrow.width=</span><span class="fl">0.5</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label=</span><span class="fu">V</span>(grhesus)<span class="sc">$</span>name,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.family=</span><span class="st">"Helvetica"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.color=</span><span class="fu">as.numeric</span>(<span class="fu">V</span>(grhesus)<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"F"</span>)<span class="sc">+</span><span class="dv">5</span>, </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout=</span>rhesus.layout)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="gettingR_files/figure-html/slade-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Rhesus monkey grooming network (Slade 1972).</figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li><p>A note on loading data: the above code loads a data file apparently called <code>"./data/sade1.txt"</code></p></li>
<li><p>What does that mean?</p></li>
<li><p>The one dot followed by a slash, <code>./</code>, means to go into the sub-directory called <code>data</code>, which is in our current working directory, and read the text file called <code>sade1.txt</code></p></li>
<li><p>If the <code>data</code> sub-directory was actually in, say, the same directory where our working directory is located (i.e., they were two sub-directories of the same higher-level folder), we would use two dots, <code>../</code>, which means to go out one directory in the hierarchy</p></li>
<li><p>This is actually not <code>R</code> but the underlying OS file system</p></li>
<li><p>Learning about the file/directory structure of your computer is actually an important (and under-appreciated) data-science skill</p></li>
<li><p>Check out the fantastic MIT course <a href="https://missing.csail.mit.edu/">The Missing Semester of Your CS Education</a> for information on various tools that can really improve your workflows and general skill-level</p></li>
</ul>
</section>
<section id="a-few-conventions-and-other-helpful-bits" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="a-few-conventions-and-other-helpful-bits"><span class="header-section-number">1.6</span> A Few Conventions and Other Helpful Bits</h2>
<ul>
<li><p>There are some things that you will see over and over in the code embedded in this document</p></li>
<li><p>The assignment operator <code>&lt;-</code> is used to assign a value to a name.</p></li>
<li><p>The value is on the right-hand side of the operator and the name is on the left side</p></li>
<li><p>You can use <code>=</code> for assignment, but I don’t recommend it (it doesn’t work at all levels, makes the code harder to read, etc.)</p></li>
<li><p>Different environments make it more or less easy to use <code>&lt;-</code>. In <code>RStudio</code>, hit the option key and the minus sign simultaneously</p></li>
<li><p>Comments are marked by <code>#</code>: anything following the hash will be ignored by <code>R</code></p></li>
<li><p>Use comments liberally to help you (and others) understand your code</p></li>
<li><p>In these notes, the output that you would see on your own command line is marked in the grey box with two (non-italic) hashes, # #</p></li>
<li><p>Sometimes I enclose a command in parentheses; this is simply to force <code>R</code> to echo the output (for pedagogical purposes)</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a comment</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>(y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
<ul>
<li><p>You will probably want to seek help on functions. At the command line, simply type a question mark followed immediately by the function you want to query, <code>?function.name</code></p></li>
<li><p>When you are done with your <code>R</code> session, type <code>q()</code> at the command line</p></li>
<li><p><code>R</code> will ask you if you want to save your workspace. For now, you probably don’t.</p></li>
<li><p>Check out the much more comprehensive <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html">Introduction to R</a> for all the language details.</p></li>
</ul>
</section>
<section id="r-as-a-calculator" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="r-as-a-calculator"><span class="header-section-number">1.7</span> <code>R</code> as a Calculator</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># addition</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># multiplication</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>a<span class="sc">*</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># division</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">/</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6666667</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">/</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span>b<span class="sc">/</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1666667</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note order of operations!</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span>(b<span class="sc">/</span>a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6666667</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parentheses can override order of operations</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># an exponential</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="sc">-</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1353353</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># why we age</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fl">0.02</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="sc">-</span>r<span class="sc">*</span><span class="dv">45</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4065697</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># something more tricky</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">log</span>(<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate 20 normally distributed random numbers</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -0.81593989  2.24630796 -1.15295773 -0.37259112  0.01241681  0.60826224
 [7]  0.91377992 -0.54673530  0.36271025  0.88816594  0.86262646 -1.59792735
[13] -1.14458520  0.33999846  0.19558133 -1.38506401  0.40395654 -2.49976083
[19]  0.28283065  0.48229027</code></pre>
</div>
</div>
</section>
<section id="data-types" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="data-types"><span class="header-section-number">1.8</span> Data Types</h2>
<dl>
<dt>Numeric</dt>
<dd>
<p>All numbers in <code>R</code> are of the form double (i.e., double-precision floating point numbers). This can be a bit confusing for people who are used to languages with integer data types (like, most languages!). Entering something that looks like an integer doesn’t mean it is.</p>
</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># it looks like an integer, but don't be fooled!</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.double</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<dl>
<dt>Integer</dt>
<dd>
<p>OK, technically <code>R</code> does have an integer class, but it is used very rarely and many functions will convert integers into doubles anyway. If you really must have an integer (e.g., because you are passing output to external C or FORTRAN code that expects it), add the suffix <code>L</code> to the entered number.</p>
</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span>L</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<dl>
<dt>Character</dt>
<dd>
<p>Strings are represented by the character data class.</p>
</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Kenya"</span>, <span class="st">"Rwanda"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Uganda"   "Tanzania" "Kenya"    "Rwanda"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1" "2" "3" "4" "5"</code></pre>
</div>
</div>
<dl>
<dt>Factor</dt>
<dd>
<p>Factors are a data type for encoding categorical data. Notice that factors are printed without the quotes. This is because R stores them as a set of codes. Data of type “factor” are different from data of type “character” (which is what plain text is). Note the difference below between factor and character data. Because factors get used in statistical models, they are actually represented as numbers (the levels) that have associated names. Vectors, on the other hand, are just lists of numbers.</p>
</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Kenya"</span>, <span class="st">"Rwanda"</span>))</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Uganda   Tanzania Kenya    Rwanda  
Levels: Kenya Rwanda Tanzania Uganda</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a trick to get some insight into how factors are handled by R</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 3 1 2
attr(,"levels")
[1] "Kenya"    "Rwanda"   "Tanzania" "Uganda"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>countries1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Kenya"</span>, <span class="st">"Rwanda"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>countries1 <span class="sc">==</span> <span class="fu">unclass</span>(countries1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>countries <span class="sc">==</span> <span class="fu">unclass</span>(countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<dl>
<dt>Logical</dt>
<dd>
<p><code>TRUE</code> and <code>FALSE</code> are reserved keywords, while <code>T</code> and <code>F</code> are global constants set to these. These logical variables are essential tools for subsetting data. You also use them extensively in setting optional arguments of functions.</p>
</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>t.or.f <span class="ot">&lt;-</span> <span class="fu">c</span>(T,F,F,T,T)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.logical</span>(t.or.f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># subset</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>aaa[t.or.f]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 4 5</code></pre>
</div>
</div>
<dl>
<dt>List</dt>
<dd>
<p>You can mix different types of data in a list using the command <code>list()</code>. This is useful when you write your own functions and want to output multiple things. Use the function <code>str()</code> to give you information about a list.</p>
</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>child1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">name=</span><span class="st">"mary"</span>, <span class="at">child.age=</span><span class="dv">6</span>,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="at">status=</span><span class="st">"foster"</span>,<span class="at">mother.alive=</span>F, <span class="at">father.alive=</span>T, <span class="at">parents.ages=</span><span class="fu">c</span>(<span class="dv">24</span>,<span class="dv">35</span>))</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(child1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ name        : chr "mary"
 $ child.age   : num 6
 $ status      : chr "foster"
 $ mother.alive: logi FALSE
 $ father.alive: logi TRUE
 $ parents.ages: num [1:2] 24 35</code></pre>
</div>
</div>
</section>
<section id="coercion" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="coercion"><span class="header-section-number">1.9</span> Coercion</h2>
<ul>
<li><p>Sometimes you have data in one type but need it in a different type</p></li>
<li><p><code>R</code> provides a variety of methods to coerce data from one type to another</p></li>
<li><p>These methods are carried out by functions that begin with <code>as.xxx</code>, where <code>xxx</code> is the data type to which you are coercing</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Kenya"</span>, <span class="st">"Rwanda"</span>))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Uganda"   "Tanzania" "Kenya"    "Rwanda"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 3 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># werk it backwards</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>countries1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Kenya"</span>, <span class="st">"Rwanda"</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(countries1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Uganda   Tanzania Kenya    Rwanda  
Levels: Kenya Rwanda Tanzania Uganda</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sometimes you want your numbers to actually be strings (e.g., when you make labels or column names)</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1" "2" "3" "4" "5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># there actually is an integer class; it just doesn't get used much at all</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(<span class="fu">as.integer</span>(a))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<ul>
<li>You can check the class of an object using functions that begin with <code>is.xxx</code>, where <code>xxx</code> is the data type you are querying (like <code>is.integer()</code> above)</li>
</ul>
</section>
<section id="creating-vectors" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="creating-vectors"><span class="header-section-number">1.10</span> Creating Vectors</h2>
<ul>
<li><p>A vector is a list of numbers – it turns out everything in <code>R</code> is represented as a vector but that doesn’t affect your life much.</p></li>
<li><p>In order to create a vector, you use the the function <code>c()</code>, which concatenates a list of items (hence the “c”).</p></li>
<li><p>You will use this a lot and it’s a super-common mistake to forget the <code>c()</code> when putting together a list of numbers, factors, etc.</p></li>
<li><p>If you do forget it, you will get a syntax error</p></li>
<li><p>Often we want either regularly spaced vectors or a vector of one value repeated. <code>R</code> has a number of facilities to perform these operations.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>( manual <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 7 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>( count <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>( ages <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">85</span>,<span class="at">by=</span><span class="dv">5</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0  5 10 15 20 25 30 35 40 45 50 55 60 65 70 75 80 85</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>( ones <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">10</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>( fourages <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>)) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>( equalspace <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">5</span>, <span class="at">length=</span><span class="dv">20</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.000000 1.210526 1.421053 1.631579 1.842105 2.052632 2.263158 2.473684
 [9] 2.684211 2.894737 3.105263 3.315789 3.526316 3.736842 3.947368 4.157895
[17] 4.368421 4.578947 4.789474 5.000000</code></pre>
</div>
</div>
<ul>
<li><p>You can use <code>rep()</code> to repeat values.</p></li>
<li><p>Sometimes this can be tricky: the second argument tells <code>R</code> how many repetitions.</p></li>
<li><p>This argument can be a vector and this, along with the possibility of a vector of the items you want repeated too, allows you to create quite complex patterns very easily.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">2</span>,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2 2 2 2 2 2 2 2 2 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="st">"R roolz!"</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "R roolz!" "R roolz!" "R roolz!"</code></pre>
</div>
</div>
</section>
<section id="creating-matrices" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="creating-matrices"><span class="header-section-number">1.11</span> Creating Matrices</h2>
<ul>
<li><p>As we said, a vector is a list of numbers</p></li>
<li><p>A matrix is a rectangular array of numbers – it is a vector of vectors, with the numbers indexed by row and column.</p></li>
<li><p>One way to create matrices is to “bind” columns together using the commands <code>cbind()</code> or <code>rbind()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># age distribution of Gombe chimps in 1980 and 1986</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>cx1980 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">13</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">5</span>, <span class="dv">35</span>, <span class="dv">9</span>)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>cx1988 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">38</span>, <span class="dv">0</span>)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>( C <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cx1980, cx1988) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     cx1980 cx1988
[1,]      7      9
[2,]     13     11
[3,]      8     15
[4,]     13      8
[5,]      5      9
[6,]     35     38
[7,]      9      0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># another way</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>C <span class="ot">&lt;-</span> <span class="fu">c</span>(cx1980, cx1988)</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>(  C <span class="ot">&lt;-</span> <span class="fu">matrix</span>(C, <span class="at">nrow=</span><span class="dv">7</span>, <span class="at">ncol=</span><span class="dv">2</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    7    9
[2,]   13   11
[3,]    8   15
[4,]   13    8
[5,]    5    9
[6,]   35   38
[7,]    9    0</code></pre>
</div>
</div>
<ul>
<li>What happens if we try to bind columns of different lengths?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># age distribution at Tai; Boesch uses fewer age classes</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>cxboesch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">18</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">30</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>( C <span class="ot">&lt;-</span> <span class="fu">cbind</span>(C,cxboesch) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cbind(C, cxboesch): number of rows of result is not a multiple of
vector length (arg 2)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>           cxboesch
[1,]  7  9       18
[2,] 13 11       10
[3,]  8 15       15
[4,] 13  8       30
[5,]  5  9       18
[6,] 35 38       10
[7,]  9  0       15</code></pre>
</div>
</div>
<ul>
<li><p>Both the warning message and the output can seem a little odd to the uninitiated</p></li>
<li><p><code>R</code> uses a recycling rule for filling out vectors and matrices</p></li>
<li><p>When you try to put together things that are neither the same length nor multiples of each other, you get a warning</p></li>
<li><p>We can use the recycling rule to make a matrix of ones:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>( X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nr=</span><span class="dv">3</span>,<span class="at">nc=</span><span class="dv">3</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    1    1    1
[3,]    1    1    1</code></pre>
</div>
</div>
<ul>
<li><p>Note that using the short version of <code>nrow</code>, <code>nr</code>, is sufficient. This is often true – you can use the minimum name that is unambiguous.</p></li>
<li><p>The <code>matrix()</code> command requires at least 3 arguments: (1) a vector of numbers that will form the elements of the matrix, (2) the number of rows, and (3) the number of columns.</p></li>
<li><p>For small matrices, you might want to enter the vectors of values manually</p></li>
<li><p>If you do this, it’s important to know that <code>R</code> fills matrices column-wise (the standard for FORTRAN and definitely not the way most people actually work!).</p></li>
<li><p>Use the optional argument <code>byrow=TRUE</code> to make <code>R</code> read in the data row-wise</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cross-classified data on hair/eye color </span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>freq <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">32</span>,<span class="dv">11</span>,<span class="dv">10</span>,<span class="dv">3</span>,  <span class="dv">38</span>,<span class="dv">50</span>,<span class="dv">25</span>,<span class="dv">15</span>,  <span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">7</span>,<span class="dv">7</span>,  <span class="dv">3</span>,<span class="dv">30</span>,<span class="dv">5</span>,<span class="dv">8</span>)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>hair <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Black"</span>, <span class="st">"Brown"</span>, <span class="st">"Red"</span>, <span class="st">"Blond"</span>)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>eyes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brown"</span>, <span class="st">"Blue"</span>, <span class="st">"Hazel"</span>, <span class="st">"Green"</span>)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>freqmat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(freq, <span class="at">nr=</span><span class="dv">4</span>, <span class="at">nc=</span><span class="dv">4</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(freqmat)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> hair</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(freqmat)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> eyes</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>freqmat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Brown Blue Hazel Green
Black    32   11    10     3
Brown    38   50    25    15
Red      10   10     7     7
Blond     3   30     5     8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># might as well do something with it</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(freqmat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="gettingR_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="data-frames" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="data-frames"><span class="header-section-number">1.12</span> Data Frames</h2>
<ul>
<li><p>A data frame is an <code>R</code> object which stores a data matrix. A data frame is essentially a list of variables which are all the same length. A single data frame can hold different types of variables.</p></li>
<li><p>To access a variable contained in a data frame, use the data frame name followed by the variable name, separated by a dollar sign, <code>$</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># five columns of data</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>satu <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>dua <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="st">"d"</span>,<span class="st">"e"</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>tiga <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>),<span class="dv">5</span>,<span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>empat <span class="ot">&lt;-</span> LETTERS[<span class="dv">7</span><span class="sc">:</span><span class="dv">11</span>]</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>lima <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="co"># construct a data frame</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>(collection <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(satu,dua,tiga,empat,lima))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  satu dua  tiga empat        lima
1    1   a FALSE     G -0.24012272
2    2   b  TRUE     H  1.62867872
3    3   c FALSE     I  1.34427662
4    4   d  TRUE     J  0.04494688
5    5   e FALSE     K  0.11910426</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the third variable</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>collection<span class="sc">$</span>tiga</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<ul>
<li>by default, <code>data.frame()</code> will produce row numbers (seen to the left of the first column in the data frame <code>collection</code> above)</li>
</ul>
</section>
<section id="directories-and-paths" class="level2" data-number="1.13">
<h2 data-number="1.13" class="anchored" data-anchor-id="directories-and-paths"><span class="header-section-number">1.13</span> Directories and Paths</h2>
<ul>
<li><p><code>R</code> uses a working directory. The default can be set in the Preferences or using an initialization file (i.e., a file that is always read when <code>R</code> starts up).</p></li>
<li><p>If you read in a file without specifying a path, <code>R</code> will search in the working directory; if there is no file matching the name you provide, you receive an error message</p></li>
<li><p>We can query the working directory using the command <code>getwd()</code> and we can change it using <code>setwd()</code></p></li>
<li><p>You can always load a file by giving either a full or relative path</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/jhj1/Teaching/graphics"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">#setwd("/Users/jhj1/Projects/git/AABA2023_Workshop/Markdown")</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="do">## can't actually change it because it screws up the rendering!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Setting the working directory is actually <em>not recommended</em></p></li>
<li><p>It is not a good scientific practice that favors replicability/interoperability/etc.</p></li>
<li><p>It’s generally better to use <code>R</code> Projects in RStudio (as we do in this workshop)</p></li>
<li><p>To start an R Project, either double-click on the <code>.RProj</code> file in the project’s directory or clicking on the R Project menu button in the upper right corner of your RStudio frame</p></li>
<li><p>To share the work you have done in an R Project with collaborators, students, or scientists looking to replicate your work, simply share the folder containing the .RProj file</p></li>
<li><p>When you quit <code>R</code>, you will be asked if you want to save your <code>R</code> session</p></li>
<li><p>If a session has previously been saved in your working directory, there will be a copy of the workspace in the <code>R</code> binary format named <code>.RData</code></p></li>
<li><p>When <code>R</code> is started in a particular directory, if there is an <code>.RData</code> file in that directory, it will load automatically</p></li>
<li><p>This can lead to some surprising behavior if you don’t know that it can happen</p></li>
<li><p>Automatically saving and loading workspaces is also not recommended</p></li>
<li><p>Best scientific practice involves constructing your workspace using broadly-interoperable data formats (e.g., .csv files) and scripts</p></li>
</ul>
</section>
<section id="reading-files" class="level2" data-number="1.14">
<h2 data-number="1.14" class="anchored" data-anchor-id="reading-files"><span class="header-section-number">1.14</span> Reading Files</h2>
<ul>
<li><p>There are a number of ways to read data into R. Probably the easiest and most frequently used involves reading data from plain-text (ASCII) files. These files can be space, tab, or comma delimited.</p></li>
<li><p>You can create these files in a spreadsheet program like Excel or output them from most other statistical packages.</p></li>
<li><p>You can read these from a local directory or from an internet source</p></li>
<li><p><code>R</code> expects delimited files to be “white-space delimited” with values separated by either tabs or spaces and rows separated by carriage returns</p></li>
<li><p>It’s always a good idea to specify whether or not you have a header (i.e., column names). If you don’t, say <code>header=FALSE</code>; if you do, obviously, say <code>header=TRUE</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read a space-delimitted file (a sociomatrix of kids 17 kids aggressive acts toward each other)</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>(kids <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"./data/strayer_strayer1976-fig2.txt"</span>, <span class="at">header=</span><span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
1   0  1  3  4  1  0  0  1  1   0   1   0   7   0   1   0   0
2   1  0  7  8  2  1  1 12  3   0   1   1   4   1   0   0   2
3   1  4  0  7  3  2  2  0  1   0   8   1   5   5   0   0   1
4   3  3  2  0  3  1 13  3  5   1   0   0   8   3   0   2   1
5   1  0  0  3  0  4  6  0  8   5   1   0   1   3   0   2   1
6   0  0  0  0  0  0  2  8 11   0   4   0   4   3   0   1   0
7   1  0  1  9  3  4  0  2  0   0   1   0   7   9   1   1   0
8   0  0  0  1  1  1  2  0  7   5   1   1   1   0   0   0   0
9   1  1  1  2  5 11  0  3  0   0   0   0   1   0   0   0   0
10  0  0  0  0  0  0  1  0  0   0   0  11   0   1   0   1   4
11  4  0  4  3  3  2  1  0  0   0   0   3  11   5   0   2   2
12  0  0  0  0  0  0  0  0  0   2   0   0   2   0   8   0   0
13  0  1  9  3  0  3  6  0  0   0  11   2   0   1   0   7   5
14  0  1  4  0  1  2  1  0  0   0   1   0   1   0   0   0   0
15  0  0  0  0  0  0  0  0  0   0   0   3   0   0   0   0   0
16  0  0  0  0  0  1  0  0  0   0   0   1   1   0   0   0   0
17  0  0  0  0  0  0  0  0  1   1   0   0   0   0   0   0   0</code></pre>
</div>
</div>
<ul>
<li><p>If your file is delimited by something other than spaces, it is a good idea to use a slightly different function, <code>read.delim()</code> and specify exactly what the delimiter is</p></li>
<li><p>Frequently, there will be non-tabular information at the top of a file (e.g., meta-data describing the data set). Use the <code>skip=n</code> option, where <code>n</code> is the number of lines you want skipped.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>quercus <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"./data/quercus.txt"</span>, <span class="at">skip=</span><span class="dv">24</span>, <span class="at">sep=</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(quercus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    Species   Region Range acorn.size tree.height
1           Quercus alba L. Atlantic 24196        1.4          27
2  Quercus bicolor Willd.   Atlantic  7900        3.4          21
3 Quercus macrocarpa Michx. Atlantic 23038        9.1          25
4  Quercus prinoides Willd. Atlantic 17042        1.6           3
5         Quercus Prinus L. Atlantic  7646       10.5          24
6    Quercus stellata Wang. Atlantic 19938        2.5          17</code></pre>
</div>
</div>
</section>
<section id="the-workspace" class="level2" data-number="1.15">
<h2 data-number="1.15" class="anchored" data-anchor-id="the-workspace"><span class="header-section-number">1.15</span> The Workspace</h2>
<ul>
<li><p><code>R</code> handles data in a manner that is different than many statistical packages.</p></li>
<li><p>In particular, you are not limited to a single rectangular data matrix at a time.</p></li>
<li><p>The workspace holds all the objects (e.g., data frames, variables, functions) that you have created or read in.</p></li>
<li><p>You can essentially have as many data frames as your machine’s memory will allow.</p></li>
<li><p>To find out what lurks in your workspace, use <code>objects()</code> command.</p></li>
<li><p>To remove an object, use <code>rm()</code>.</p></li>
<li><p>If you <em>really</em> want to clear your whole workspace, you can use the following syntax: <code>rm(list=ls())</code>. <strong>Beware, though. Once you do this, you don’t get the data back.</strong></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">objects</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a"             "aaa"           "ages"          "b"            
 [5] "C"             "child1"        "collection"    "count"        
 [9] "countries"     "countries1"    "cx1980"        "cx1988"       
[13] "cxboesch"      "dua"           "empat"         "equalspace"   
[17] "eyes"          "fourages"      "freq"          "freqmat"      
[21] "grhesus"       "hair"          "kids"          "lima"         
[25] "manual"        "nms"           "ones"          "quercus"      
[29] "r"             "rhesus"        "rhesus.layout" "satu"         
[33] "sex"           "t.or.f"        "tiga"          "x"            
[37] "X"             "y"            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(aaa)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">objects</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
</section>
<section id="scope" class="level2" data-number="1.16">
<h2 data-number="1.16" class="anchored" data-anchor-id="scope"><span class="header-section-number">1.16</span> Scope</h2>
<ul>
<li><p>Because the <code>R</code> workspace can contain many different variables and even multiple data frames, you must be aware of scope</p></li>
<li><p>When we extract columns of a data frame (e.g., if we wanted to plot them) we need to use the syntax <code>data.frame$col.name</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="do">## load it again because we cleared all objects!</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>quercus <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"./data/quercus.txt"</span>, <span class="at">skip=</span><span class="dv">24</span>, <span class="at">sep=</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(quercus<span class="sc">$</span>tree.height, quercus<span class="sc">$</span>acorn.size, <span class="at">pch=</span><span class="dv">16</span>, <span class="at">col=</span><span class="st">"red"</span>, <span class="at">xlab=</span><span class="st">"Tree Height (m)"</span>, <span class="at">ylab=</span><span class="st">"Acorn Size (cm3)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="gettingR_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>It can be a hassle having to type the data frame name (and dollar sign) over and over again</p></li>
<li><p>With the <code>with()</code> function, we can set up a local scoping rule that allows us to drop the need to type the data frame name (and dollar sign) to access columns of a data frame</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(quercus, <span class="fu">plot</span>(tree.height, acorn.size, <span class="at">pch=</span><span class="dv">16</span>, <span class="at">col=</span><span class="st">"blue"</span>, <span class="at">xlab=</span><span class="st">"Tree Height (m)"</span>, <span class="at">ylab=</span><span class="st">"Acorn Size (cm3)"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="gettingR_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Apparently, there are <code>R</code> users who gladly use <code>with</code> and those who hate its use. I fall into the former category.</p></li>
<li><p>Note that this is a very Base-<code>R</code> perspective. the tidyverse (e.g., ggplot2, etc.) changes many of these issues.</p></li>
</ul>
</section>
<section id="indexing-and-subsetting" class="level2" data-number="1.17">
<h2 data-number="1.17" class="anchored" data-anchor-id="indexing-and-subsetting"><span class="header-section-number">1.17</span> Indexing and Subsetting</h2>
<ul>
<li><p>Index (and access) the elements of a vector using square brackets. <code>myvec[1]</code> takes the first element of a vector called <code>myvec</code>.</p></li>
<li><p>Use the colon (:) operator for sequences. <code>myvec[1:5]</code> takes the first five elements of <code>myvec</code>.</p></li>
<li><p><code>R</code> is unusual in that it allows negative indexing: <code>myvec[-1]</code> takes all elements of except the first one. To exclude a sequence, you need to place the sequence within parentheses: <code>myvec[-(1:5)]</code>.</p></li>
<li><p>Vector indices don’t have to be consecutive: <code>myvec[c(2,5,1,11)]</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">66</span>,<span class="dv">77</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>myvec[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>myvec[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>myvec[<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  2  3  4  5  6 66 77  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>myvec[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 66 77  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># try without the parentheses</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="co">#myvec[-1:5]</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>myvec[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">11</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 5 1 9</code></pre>
</div>
</div>
<ul>
<li>Access the elements of a data frame using the dollar sign. Subsetting anything other than a data frame uses square brackets.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(quercus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39  5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> quercus<span class="sc">$</span>acorn.size</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>size[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="co">#first 3 elements</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.4 3.4 9.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>size[<span class="dv">17</span>]  <span class="co">#only element 17</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>size[<span class="sc">-</span><span class="dv">39</span>] <span class="co">#all but the last element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1.4  3.4  9.1  1.6 10.5  2.5  0.9  6.8  1.8  0.3  0.9  0.8  2.0  1.1  0.6
[16]  1.8  4.8  1.1  3.6  1.1  1.1  3.6  8.1  3.6  1.8  0.4  1.1  1.2  4.1  1.6
[31]  2.0  5.5  5.9  2.6  6.0  1.0 17.1  0.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>size[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>)] <span class="co"># elements 3,6,9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9.1 2.5 1.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>size[quercus<span class="sc">$</span>Region<span class="sc">==</span><span class="st">"California"</span>] <span class="co"># use a logical test to subset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  4.1  1.6  2.0  5.5  5.9  2.6  6.0  1.0 17.1  0.4  7.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>quercus[<span class="dv">3</span>,<span class="dv">4</span>] <span class="co"># access an element of an array or data frame by X[row,col]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>quercus[,<span class="st">"tree.height"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 27.0 21.0 25.0  3.0 24.0 17.0 15.0  0.3 24.0 11.0 15.0 23.0 24.0  3.0 13.0
[16] 30.0  9.0 27.0  9.0 24.0 23.0 27.0 24.0 23.0 18.0  9.0  9.0  4.0 18.0  6.0
[31] 17.0 20.0 30.0 23.0 26.0 21.0 15.0  1.0 18.0</code></pre>
</div>
</div>
<ul>
<li>The comma with nothing in front of it means take every row in the column named <code>"tree.height"</code>.</li>
</ul>
</section>
<section id="more-subsetting" class="level2" data-number="1.18">
<h2 data-number="1.18" class="anchored" data-anchor-id="more-subsetting"><span class="header-section-number">1.18</span> More Subsetting</h2>
<ul>
<li><p>Positive indices include, negative indices exclude elements</p></li>
<li><p><code>1:3</code> means a sequence from 1 to 3</p></li>
<li><p>You can only use a single negative subscript, i.e., you can’t use <code>quercus$acorn.size[-1:3]</code></p></li>
<li><p>Of course, you can get around this by enclosing the vector in parentheses <code>quercus$acorn.size[-(1:3)]</code></p></li>
<li><p>The logical operators are <code>==</code> (equal), <code>!=</code> (not equal), and the various greater than/less than symbols: <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code></p></li>
<li><p>Further logicals are <code>&amp;</code> (and), <code>|</code> (or), <code>!</code> (not), <code>&amp;&amp;</code> (another and), <code>||</code> (another or)</p></li>
<li><p><code>&amp;</code> and <code>!</code> work elementwise on vectors: element 1 is compared in the two vectors, then element 2, and so on</p></li>
<li><p><code>&amp;&amp;</code> and <code>||</code> are tricky. These logical tests evaluate left to right, examining only the first element of each vector (they go until a result is determined for <code>||</code>).</p>
<ul>
<li>Why would you want that?? In general, you don’t. It makes some calculations faster.</li>
</ul></li>
<li><p>When you refer to a variable in a data frame, you must specify the data frame name followed a dollar sign and the variable name <code>quercus$acorn.size</code></p></li>
<li><p>Testing for equality is just a special case of a logical test. We frequently want to identify numbers either above or below some criterion.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">66</span>,<span class="dv">77</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>)</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> myvec[myvec<span class="sc">&lt;=</span><span class="dv">10</span>]</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>myvec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="co"># elements that are greater than 2 but less than 6</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>(x<span class="sc">&gt;</span><span class="dv">2</span>) <span class="sc">&amp;</span> (x<span class="sc">&lt;</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>is.even <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>),<span class="dv">5</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>(evens <span class="ot">&lt;-</span> myvec[is.even])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4  6  8 10</code></pre>
</div>
</div>
</section>
<section id="missing-values" class="level2" data-number="1.19">
<h2 data-number="1.19" class="anchored" data-anchor-id="missing-values"><span class="header-section-number">1.19</span> Missing Values</h2>
<ul>
<li><p><code>NA</code> is a special code for missing data.</p></li>
<li><p><code>NA</code> pretty much means “Don’t Know.”</p></li>
<li><p>The presence of <code>NA</code> values in your data set can lead to some surprising consequences.</p></li>
<li><p>You can’t test for a <code>NA</code> the way you would test for any other value (i.e., using the <code>==</code> operator) since <code>variable==NA</code> is like asking in English, is the variable equal to some number I don’t know? How could you know that?!</p></li>
<li><p>It also doesn’t make any sense to add one to something you don’t know what it is – <code>1+NA</code> is meaningless!</p></li>
<li><p><code>R</code> therefore provides the function <code>is.na()</code> that allows us to subset using logicals.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="cn">NA</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="cn">NA</span>,<span class="dv">10</span>)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> aaa[<span class="sc">!</span><span class="fu">is.na</span>(aaa)]</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>aaa</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<ul>
<li><p>Here we used the not-operator (<code>!</code>) to index everything that is <em>not</em> an <code>NA</code></p></li>
<li><p>This is actually probably the most common way of using <code>is.na()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="cn">NA</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="cn">NA</span>,<span class="dv">10</span>)</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(aaa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE
[13]  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.na</span>(aaa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE
[13] FALSE  TRUE</code></pre>
</div>
</div>
<ul>
<li><p>There are a couple other special values of objects</p></li>
<li><p>One is <code>Inf</code>, which means “infinity.”” It may result from dividing zero by zero.</p></li>
<li><p>Another is <code>NaN</code>, which means “not a number.” You will get this is, e.g., you try to take a logarithm of a negative number.</p></li>
</ul>
</section>
<section id="summarizing-data" class="level2" data-number="1.20">
<h2 data-number="1.20" class="anchored" data-anchor-id="summarizing-data"><span class="header-section-number">1.20</span> Summarizing Data</h2>
<ul>
<li>The function <code>table()</code> is a very useful way of exploring data</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>,<span class="dv">5</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(aaa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aaa
 1  2  3  4  5  6  7  8  9 10 11 12 
 5  9 14 13 17 16  9 10  3  2  1  1 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>donner <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"./data/donner.dat"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">skip=</span><span class="dv">2</span>)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="co"># survival=0 == died; male=0 == female</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(donner, <span class="fu">table</span>(male,survival))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    survival
male  0  1
   0  5 10
   1 20 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># table along 3 dimensions</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(donner, <span class="fu">table</span>(male,survival,age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , age = 15

    survival
male 0 1
   0 0 1
   1 1 0

, , age = 18

    survival
male 0 1
   0 0 0
   1 0 1

, , age = 20

    survival
male 0 1
   0 0 1
   1 0 1

, , age = 21

    survival
male 0 1
   0 0 1
   1 0 0

, , age = 22

    survival
male 0 1
   0 0 1
   1 0 0

, , age = 23

    survival
male 0 1
   0 0 1
   1 2 1

, , age = 24

    survival
male 0 1
   0 0 1
   1 1 0

, , age = 25

    survival
male 0 1
   0 1 1
   1 5 1

, , age = 28

    survival
male 0 1
   0 0 0
   1 2 2

, , age = 30

    survival
male 0 1
   0 0 0
   1 3 1

, , age = 32

    survival
male 0 1
   0 0 2
   1 0 1

, , age = 35

    survival
male 0 1
   0 0 0
   1 1 0

, , age = 40

    survival
male 0 1
   0 0 1
   1 1 1

, , age = 45

    survival
male 0 1
   0 2 0
   1 0 0

, , age = 46

    survival
male 0 1
   0 0 0
   1 0 1

, , age = 47

    survival
male 0 1
   0 1 0
   1 0 0

, , age = 50

    survival
male 0 1
   0 1 0
   1 0 0

, , age = 57

    survival
male 0 1
   0 0 0
   1 1 0

, , age = 60

    survival
male 0 1
   0 0 0
   1 1 0

, , age = 62

    survival
male 0 1
   0 0 0
   1 1 0

, , age = 65

    survival
male 0 1
   0 0 0
   1 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>cage <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">length</span>(donner<span class="sc">$</span>age))</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify by defining 2 age classes: over/under 25</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>cage[donner<span class="sc">$</span>age<span class="sc">&lt;=</span><span class="dv">25</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>cage[donner<span class="sc">$</span>age<span class="sc">&gt;</span><span class="dv">25</span>] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>donner <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(donner,<span class="at">cage=</span>cage)</span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(donner, <span class="fu">table</span>(male,survival,cage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , cage = 1

    survival
male  0  1
   0  1  7
   1  9  4

, , cage = 2

    survival
male  0  1
   0  4  3
   1 11  6</code></pre>
</div>
</div>
<ul>
<li>It’s sometimes useful to sort a vector</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>,<span class="dv">5</span>)</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(aaa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  0  1  1  1  1  2  2  2  2  2  2  2  2  2  2  2  3  3  3  3  3  3  3  3  3
 [26]  3  3  3  3  3  3  3  3  3  3  3  4  4  4  4  4  4  4  4  4  4  4  4  5  5
 [51]  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  6  6  6  6  6  6  6
 [76]  6  6  6  7  7  7  7  7  7  7  7  7  8  8  8  8  9  9  9  9  9 10 11 11 17</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># decreasing order</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(aaa,<span class="at">decreasing=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 17 11 11 10  9  9  9  9  9  8  8  8  8  7  7  7  7  7  7  7  7  7  6  6  6
 [26]  6  6  6  6  6  6  6  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5
 [51]  5  5  4  4  4  4  4  4  4  4  4  4  4  4  3  3  3  3  3  3  3  3  3  3  3
 [76]  3  3  3  3  3  3  3  3  3  2  2  2  2  2  2  2  2  2  2  2  1  1  1  1  0</code></pre>
</div>
</div>
<ul>
<li><p>Sorting data frames is a bit more involved, but still straightforward</p></li>
<li><p>use the function <code>order()</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># five columns of data again</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>satu <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>dua <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="st">"d"</span>,<span class="st">"e"</span>)</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>tiga <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>),<span class="dv">5</span>,<span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>empat <span class="ot">&lt;-</span> LETTERS[<span class="dv">7</span><span class="sc">:</span><span class="dv">11</span>]</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>lima <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="co"># construct a data frame</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>(collection <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(satu,dua,tiga,empat,lima))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  satu dua  tiga empat       lima
1    1   a  TRUE     G -0.5836921
2    2   b FALSE     H  0.9042409
3    3   c  TRUE     I -0.1804774
4    4   d FALSE     J  1.3276193
5    5   e  TRUE     K  0.3944727</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>o <span class="ot">&lt;-</span> <span class="fu">order</span>(collection<span class="sc">$</span>lima)</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>collection[o,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  satu dua  tiga empat       lima
1    1   a  TRUE     G -0.5836921
3    3   c  TRUE     I -0.1804774
5    5   e  TRUE     K  0.3944727
2    2   b FALSE     H  0.9042409
4    4   d FALSE     J  1.3276193</code></pre>
</div>
</div>
<ul>
<li>there are definitely better ways to do this using tidy tools like <code>dplyr::arrange()</code>!</li>
</ul>
</section>
<section id="naming-data" class="level2" data-number="1.21">
<h2 data-number="1.21" class="anchored" data-anchor-id="naming-data"><span class="header-section-number">1.21</span> Naming Data</h2>
<ul>
<li><p>The matrix of aggressive interactions among kids had neither column nor row names</p></li>
<li><p>We can add the codes used in the Strayer and Strayer (1976) paper</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="do">## load it again because we cleared all objects!</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>kids <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"./data/strayer_strayer1976-fig2.txt"</span>, <span class="at">header=</span><span class="cn">FALSE</span>)</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>kid.names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Ro"</span>,<span class="st">"Ss"</span>,<span class="st">"Br"</span>,<span class="st">"If"</span>,<span class="st">"Td"</span>,<span class="st">"Sd"</span>,<span class="st">"Pe"</span>,<span class="st">"Ir"</span>,<span class="st">"Cs"</span>,<span class="st">"Ka"</span>,</span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Ch"</span>,<span class="st">"Ty"</span>,<span class="st">"Gl"</span>,<span class="st">"Sa"</span>, <span class="st">"Me"</span>,<span class="st">"Ju"</span>,<span class="st">"Sh"</span>)</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(kids) <span class="ot">&lt;-</span> kid.names</span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(kids) <span class="ot">&lt;-</span> kid.names</span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>kids</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Ro Ss Br If Td Sd Pe Ir Cs Ka Ch Ty Gl Sa Me Ju Sh
Ro  0  1  3  4  1  0  0  1  1  0  1  0  7  0  1  0  0
Ss  1  0  7  8  2  1  1 12  3  0  1  1  4  1  0  0  2
Br  1  4  0  7  3  2  2  0  1  0  8  1  5  5  0  0  1
If  3  3  2  0  3  1 13  3  5  1  0  0  8  3  0  2  1
Td  1  0  0  3  0  4  6  0  8  5  1  0  1  3  0  2  1
Sd  0  0  0  0  0  0  2  8 11  0  4  0  4  3  0  1  0
Pe  1  0  1  9  3  4  0  2  0  0  1  0  7  9  1  1  0
Ir  0  0  0  1  1  1  2  0  7  5  1  1  1  0  0  0  0
Cs  1  1  1  2  5 11  0  3  0  0  0  0  1  0  0  0  0
Ka  0  0  0  0  0  0  1  0  0  0  0 11  0  1  0  1  4
Ch  4  0  4  3  3  2  1  0  0  0  0  3 11  5  0  2  2
Ty  0  0  0  0  0  0  0  0  0  2  0  0  2  0  8  0  0
Gl  0  1  9  3  0  3  6  0  0  0 11  2  0  1  0  7  5
Sa  0  1  4  0  1  2  1  0  0  0  1  0  1  0  0  0  0
Me  0  0  0  0  0  0  0  0  0  0  0  3  0  0  0  0  0
Ju  0  0  0  0  0  1  0  0  0  0  0  1  1  0  0  0  0
Sh  0  0  0  0  0  0  0  0  1  1  0  0  0  0  0  0  0</code></pre>
</div>
</div>
<ul>
<li><p><code>colnames()</code> and <code>rownames()</code> are convenience functions</p></li>
<li><p>A More General Method Will Be Presented Next Slide</p></li>
</ul>
</section>
<section id="working-on-lists" class="level2" data-number="1.22">
<h2 data-number="1.22" class="anchored" data-anchor-id="working-on-lists"><span class="header-section-number">1.22</span> Working on Lists</h2>
<ul>
<li><p><code>apply()</code> applies a function along the margins of a matrix</p></li>
<li><p><code>lapply()</code> applies a function to a list and generates a list as its output</p></li>
<li><p><code>sapply()</code> is similar to <code>lapply()</code> but generates a vector as its output</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">alpha =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">beta =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>), <span class="at">x =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="at">replace=</span><span class="cn">TRUE</span>))</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(aaa,mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$alpha
[1] 5.5

$beta
[1] -0.0708709

$x
[1] 53.53</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># more compact as a vector</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(aaa,mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     alpha       beta          x 
 5.5000000 -0.0708709 53.5300000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cross-tabulation of sex partners from NHSLS</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>sextable <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./data/nhsls_sextable.txt"</span>, <span class="at">header=</span><span class="cn">FALSE</span>)</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(sextable)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"white"</span>,<span class="st">"black"</span>,<span class="st">"hispanic"</span>,<span class="st">"asian"</span>,<span class="st">"other"</span>)</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(sextable)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"white"</span>,<span class="st">"black"</span>,<span class="st">"hispanic"</span>,<span class="st">"asian"</span>,<span class="st">"other"</span>)</span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate marginals</span></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>(row.sums <span class="ot">&lt;-</span> <span class="fu">apply</span>(sextable,<span class="dv">1</span>,sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   white    black hispanic    asian    other 
    1177      278      158       26       26 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>(col.sums <span class="ot">&lt;-</span> <span class="fu">apply</span>(sextable,<span class="dv">2</span>,sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   white    black hispanic    asian    other 
    1194      281      137       13       40 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using sapply() gives similar output</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(sextable,sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   white    black hispanic    asian    other 
    1194      281      137       13       40 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compare the output of sapply() to lapply()</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(sextable,sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$white
[1] 1194

$black
[1] 281

$hispanic
[1] 137

$asian
[1] 13

$other
[1] 40</code></pre>
</div>
</div>
<ul>
<li>The <code>apply</code> family of functions used to be more widely used and have been largely supplanted by the immensely powerful tools in <code>dplyr</code> and the <a href="https://www.tidyverse.org/">tidyverse</a> more generally</li>
</ul>
</section>
<section id="flow-control-if" class="level2" data-number="1.23">
<h2 data-number="1.23" class="anchored" data-anchor-id="flow-control-if"><span class="header-section-number">1.23</span> Flow Control: <code>if</code></h2>
<ul>
<li><p><code>if</code> allows you to conditionally evaluate expressions.</p></li>
<li><p>The basic syntax of an <code>if</code> statement is: <code>if(condition) true.branch else false.branch</code></p></li>
<li><p>The <code>else</code> part of the statement is optional</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>(coin <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"heads"</span>,<span class="st">"tails"</span>),<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "heads"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(coin<span class="sc">==</span><span class="st">"tails"</span>) b <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="cf">else</span> b <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<ul>
<li><p>Sometimes you can use the very efficient <code>ifelse</code> statement</p></li>
<li><p><code>ifelse</code> takes three arguments: (1) the logical test, (2) the result if <code>TRUE</code>, (3) the result if <code>FALSE</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">4</span><span class="sc">:-</span><span class="dv">2</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sqrt(x) produces warnings, but using ifelse to check works without producing warings</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">ifelse</span>(x <span class="sc">&gt;=</span> <span class="dv">0</span>, x, <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.000000 1.732051 1.414214 1.000000 0.000000       NA       NA</code></pre>
</div>
</div>
</section>
<section id="flow-control-for" class="level2" data-number="1.24">
<h2 data-number="1.24" class="anchored" data-anchor-id="flow-control-for"><span class="header-section-number">1.24</span> Flow Control: <code>for</code></h2>
<ul>
<li><p>If you want to repeat an action over and over again you need a loop</p></li>
<li><p>Loops are mostly generated using <code>for</code> statements</p></li>
<li><p>The basic syntax of a <code>for</code> loop is: <code>for(item in sequence) statement(s)</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="fu">print</span>(x[i])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<ul>
<li><p>That’s a pretty silly <code>for</code> loop – there are much more important uses of <code>for</code> loops!</p></li>
<li><p>If there are multiple statements executed by a <code>for</code> loop, those statements must be enclosed in curly braces, <code>{}</code></p></li>
<li><p>We need to be careful with <code>for</code> loops because they can slow code down, particularly when they are nested and the number of iterations is very large.</p></li>
<li><p>Vectorizing and using mapping functions like <code>apply</code> and its relatives can greatly speed your code up</p></li>
</ul>
</section>
<section id="using-packages" class="level2" data-number="1.25">
<h2 data-number="1.25" class="anchored" data-anchor-id="using-packages"><span class="header-section-number">1.25</span> Using Packages</h2>
<ul>
<li><p>Much of the functionality of <code>R</code> comes from the many contributed packages</p></li>
<li><p>To use a package, you must first install it</p></li>
<li><p>This can be done at the command line using <code>install.packages(package_name)</code></p></li>
<li><p>It is often more convenient to use a menu command</p></li>
<li><p>in <code>RStudio</code> this is under <code>Tools&gt;Install Packages...</code></p></li>
<li><p>Once a package is installed, you must load it in order to use it</p></li>
<li><p>Do this using the <code>library()</code> command</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co"># might as well do something with it</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="co"># a small graph</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">make_graph</span>( <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">1</span>,<span class="dv">3</span>, <span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">3</span>,<span class="dv">5</span>), <span class="at">n=</span><span class="dv">5</span> )</span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="gettingR_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Fun with Graphs">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Fun with Graphs</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./interpreting.html" class="pagination-link" aria-label="Interpreting Scientific Figures">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Interpreting Scientific Figures</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>